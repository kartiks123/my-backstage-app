{"version":3,"file":"index-305a517e.esm.js","sources":["../../src/hooks/useCalendarsQuery.ts","../../src/hooks/useEventsQuery.ts","../../src/hooks/useSignIn.ts","../../src/hooks/useStoredCalendars.ts","../../src/components/CalendarCard/AttendeeChip.tsx","../../src/components/CalendarCard/util.ts","../../src/components/CalendarCard/CalendarEventPopoverContent.tsx","../../src/components/CalendarCard/CalendarEvent.tsx","../../src/components/CalendarCard/CalendarSelect.tsx","../../src/components/CalendarCard/signInEventMock.ts","../../src/components/CalendarCard/SignInContent.tsx","../../src/components/CalendarCard/CalendarCard.tsx","../../src/components/CalendarCard/HomePageCalendar.tsx"],"sourcesContent":["/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useQuery } from '@tanstack/react-query';\n\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\n\nimport { gcalendarApiRef } from '../api';\n\ntype Options = {\n  enabled: boolean;\n  refreshTime?: number;\n};\n\nexport const useCalendarsQuery = ({ enabled }: Options) => {\n  const calendarApi = useApi(gcalendarApiRef);\n  const errorApi = useApi(errorApiRef);\n\n  return useQuery(\n    ['calendars'],\n    async () => {\n      const calendars = [];\n      let token = '';\n      do {\n        const { nextPageToken = '', items = [] } =\n          await calendarApi.getCalendars({\n            maxResults: 100,\n            minAccessRole: 'reader',\n            pageToken: token,\n          });\n        token = nextPageToken;\n        calendars.push(...items);\n      } while (token);\n\n      return calendars;\n    },\n    {\n      enabled,\n      keepPreviousData: true,\n      refetchInterval: 3600000,\n      onError: () => {\n        errorApi.post({\n          name: 'API error',\n          message: 'Failed to fetch calendars.',\n        });\n      },\n    },\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { compact, unescape } from 'lodash';\nimport { useMemo } from 'react';\nimport { useQueries } from '@tanstack/react-query';\n\nimport { useApi } from '@backstage/core-plugin-api';\n\nimport { gcalendarApiRef, GCalendar, GCalendarEvent } from '../api';\n\ntype Options = {\n  selectedCalendars?: string[];\n  timeMin: string;\n  timeMax: string;\n  enabled: boolean;\n  calendars: GCalendar[];\n  timeZone: string;\n  refreshTime?: number;\n};\n\nexport const useEventsQuery = ({\n  selectedCalendars = [],\n  calendars = [],\n  enabled,\n  timeMin,\n  timeMax,\n  timeZone,\n}: Options) => {\n  const calendarApi = useApi(gcalendarApiRef);\n  const eventQueries = useQueries({\n    queries: selectedCalendars\n      .filter(id => calendars.find(c => c.id === id))\n      .map(calendarId => {\n        const calendar = calendars.find(c => c.id === calendarId);\n\n        return {\n          queryKey: ['calendarEvents', calendarId, timeMin, timeMax],\n          enabled,\n          initialData: [],\n          refetchInterval: 60000,\n          refetchIntervalInBackground: true,\n\n          queryFn: async (): Promise<GCalendarEvent[]> => {\n            const data = await calendarApi.getEvents(calendarId, {\n              calendarId,\n              timeMin,\n              timeMax,\n              showDeleted: false,\n              singleEvents: true,\n              maxResults: 100,\n              orderBy: 'startTime',\n              timeZone,\n            });\n\n            return (data.items || []).map(event => {\n              const responseStatus = event.attendees?.find(\n                a => !!a.self,\n              )?.responseStatus;\n\n              return {\n                ...event,\n                summary: unescape(event.summary || ''),\n                calendarId,\n                backgroundColor: calendar?.backgroundColor,\n                primary: !!calendar?.primary,\n                responseStatus,\n              };\n            });\n          },\n        };\n      }),\n  });\n\n  const events = useMemo(\n    () => compact(eventQueries.map(({ data }) => data).flat()),\n    [eventQueries],\n  );\n\n  const isLoading =\n    !!eventQueries.find(q => q.isFetching) && events.length === 0;\n\n  return { events, isLoading };\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useCallback, useState } from 'react';\n\nimport { googleAuthApiRef, useApi } from '@backstage/core-plugin-api';\n\nexport const useSignIn = () => {\n  const [isSignedIn, setSignedIn] = useState(false);\n  const [isInitialized, setInitialized] = useState(false);\n  const authApi = useApi(googleAuthApiRef);\n\n  const signIn = useCallback(\n    async (optional = false) => {\n      const token = await authApi.getAccessToken(\n        [\n          'https://www.googleapis.com/auth/calendar.readonly',\n          'https://www.googleapis.com/auth/userinfo.email',\n        ],\n        {\n          optional,\n          instantPopup: !optional,\n        },\n      );\n\n      setSignedIn(!!token);\n      setInitialized(true);\n    },\n    [authApi, setSignedIn],\n  );\n\n  return { isSignedIn, isInitialized, signIn };\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useApi, storageApiRef } from '@backstage/core-plugin-api';\nimport useObservable from 'react-use/lib/useObservable';\n\nimport { gcalendarPlugin } from '../plugin';\n\nexport enum LocalStorageKeys {\n  selectedCalendars = 'google_calendars_selected',\n}\n\nexport function useStoredCalendars(\n  defaultValue: string[],\n): [string[], (value: string[]) => void] {\n  const storageBucket = gcalendarPlugin.getId();\n  const storageKey = LocalStorageKeys.selectedCalendars;\n  const storageApi = useApi(storageApiRef).forBucket(storageBucket);\n  const setValue = (value: string[]) => {\n    storageApi.set(storageKey, value);\n  };\n  const snapshot = useObservable(\n    storageApi.observe$<string[]>(storageKey),\n    storageApi.snapshot(storageKey),\n  );\n  let result: string[];\n  if (snapshot.presence === 'absent') {\n    result = defaultValue;\n  } else {\n    result = snapshot.value!;\n  }\n  return [result, setValue];\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Badge, Chip, makeStyles } from '@material-ui/core';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport CheckIcon from '@material-ui/icons/CheckCircle';\nimport { EventAttendee, ResponseStatus } from '../../api';\n\nconst useStyles = makeStyles(theme => {\n  const getIconColor = (responseStatus?: string) => {\n    if (!responseStatus) return theme.palette.primary.light;\n\n    return {\n      [ResponseStatus.accepted]: theme.palette.status.ok,\n      [ResponseStatus.declined]: theme.palette.status.error,\n    }[responseStatus];\n  };\n\n  return {\n    responseStatus: {\n      color: ({ responseStatus }: { responseStatus?: string }) =>\n        getIconColor(responseStatus),\n    },\n    badge: {\n      right: 10,\n      top: 5,\n      '& svg': {\n        height: 16,\n        width: 16,\n        background: theme.palette.common.white,\n      },\n    },\n  };\n});\n\nconst ResponseIcon = ({ responseStatus }: any) => {\n  if (responseStatus === ResponseStatus.accepted) {\n    return <CheckIcon data-testid=\"accepted-icon\" />;\n  }\n  if (responseStatus === ResponseStatus.declined) {\n    return <CancelIcon data-testid=\"declined-icon\" />;\n  }\n\n  return null;\n};\n\ntype AttendeeChipProps = {\n  user: EventAttendee;\n};\n\nexport const AttendeeChip = ({ user }: AttendeeChipProps) => {\n  const classes = useStyles({ responseStatus: user.responseStatus });\n\n  return (\n    <Badge\n      classes={{\n        root: classes.responseStatus,\n        badge: classes.badge,\n      }}\n      badgeContent={<ResponseIcon responseStatus={user.responseStatus} />}\n    >\n      <Chip\n        size=\"small\"\n        variant=\"outlined\"\n        label={user.email}\n        color=\"primary\"\n      />\n    </Badge>\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { DateTime } from 'luxon';\n\nimport { GCalendarEvent } from '../../api';\n\nexport function getZoomLink(event: GCalendarEvent) {\n  const videoEntrypoint = event.conferenceData?.entryPoints?.find(\n    e => e.entryPointType === 'video',\n  );\n\n  return videoEntrypoint?.uri ?? '';\n}\n\nexport function getTimePeriod(event: GCalendarEvent) {\n  if (isAllDay(event)) {\n    return getAllDayTimePeriod(event);\n  }\n\n  const format: Intl.DateTimeFormatOptions = {\n    hour: '2-digit',\n    minute: '2-digit',\n  };\n\n  const startTime = DateTime.fromISO(event.start?.dateTime || '');\n  const endTime = DateTime.fromISO(event.end?.dateTime || '');\n\n  return `${startTime.toLocaleString(format)} - ${endTime.toLocaleString(\n    format,\n  )}`;\n}\n\nfunction getAllDayTimePeriod(event: GCalendarEvent) {\n  const format: Intl.DateTimeFormatOptions = { month: 'long', day: 'numeric' };\n  const startTime = DateTime.fromISO(\n    event.start?.dateTime || event.start?.date || '',\n  );\n  const endTime = DateTime.fromISO(\n    event.end?.dateTime || event.end?.date || '',\n  ).minus({ day: 1 });\n\n  if (startTime.toISO() === endTime.toISO()) {\n    return startTime.toLocaleString(format);\n  }\n\n  return `${startTime.toLocaleString(format)} - ${endTime.toLocaleString(\n    format,\n  )}`;\n}\n\nexport function isPassed(event: GCalendarEvent) {\n  if (!event.end?.dateTime && !event.end?.date) return false;\n  const eventDate = DateTime.fromISO(event.end?.dateTime || event.end?.date!);\n  return DateTime.now() >= eventDate;\n}\n\nexport function isAllDay(event: GCalendarEvent) {\n  if (event.start?.date || event.end?.date) {\n    return true;\n  }\n  const startTime = DateTime.fromISO(event.start?.dateTime || '');\n  const endTime = DateTime.fromISO(event.end?.dateTime || '');\n\n  return endTime.diff(startTime, 'day').days >= 1;\n}\n\nexport function getStartDate(event: GCalendarEvent) {\n  return DateTime.fromISO(event.start?.dateTime || event.start?.date || '');\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { sortBy } from 'lodash';\nimport React from 'react';\nimport DOMPurify from 'dompurify';\n\nimport { useAnalytics } from '@backstage/core-plugin-api';\nimport { Link } from '@backstage/core-components';\nimport {\n  Box,\n  Divider,\n  IconButton,\n  Tooltip,\n  Typography,\n  makeStyles,\n} from '@material-ui/core';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\n\nimport { AttendeeChip } from './AttendeeChip';\nimport { GCalendarEvent } from '../../api';\nimport { getTimePeriod, getZoomLink } from './util';\n\nconst useStyles = makeStyles(\n  theme => {\n    return {\n      description: {\n        wordBreak: 'break-word',\n        '& a': {\n          color: theme.palette.primary.main,\n          fontWeight: 500,\n        },\n      },\n      divider: {\n        marginTop: theme.spacing(2),\n        marginBottom: theme.spacing(2),\n      },\n    };\n  },\n  {\n    name: 'GCalendarEventPopoverContent',\n  },\n);\n\ntype CalendarEventPopoverProps = {\n  event: GCalendarEvent;\n};\n\nexport const CalendarEventPopoverContent = ({\n  event,\n}: CalendarEventPopoverProps) => {\n  const classes = useStyles({ event });\n  const analytics = useAnalytics();\n  const zoomLink = getZoomLink(event);\n\n  return (\n    <Box display=\"flex\" flexDirection=\"column\" width={400} p={2}>\n      <Box display=\"flex\" alignItems=\"center\">\n        <Box flex={1}>\n          <Typography variant=\"h6\">{event.summary}</Typography>\n          <Typography variant=\"subtitle2\">{getTimePeriod(event)}</Typography>\n        </Box>\n        {event.htmlLink && (\n          <Tooltip title=\"Open in Calendar\">\n            <Link\n              data-testid=\"open-calendar-link\"\n              to={event.htmlLink}\n              onClick={_e =>\n                analytics.captureEvent('click', 'open in calendar')\n              }\n              noTrack\n            >\n              <IconButton>\n                <ArrowForwardIcon />\n              </IconButton>\n            </Link>\n          </Tooltip>\n        )}\n      </Box>\n      {zoomLink && (\n        <Link\n          to={zoomLink}\n          onClick={_e => analytics.captureEvent('click', 'zoom link')}\n          noTrack\n        >\n          Join Zoom Meeting\n        </Link>\n      )}\n\n      {event.description && (\n        <>\n          <Divider className={classes.divider} variant=\"fullWidth\" />\n          <Box\n            className={classes.description}\n            dangerouslySetInnerHTML={{\n              __html: DOMPurify.sanitize(event.description, {\n                USE_PROFILES: { html: true },\n              }),\n            }}\n          />\n        </>\n      )}\n\n      {event.attendees && (\n        <>\n          <Divider className={classes.divider} variant=\"fullWidth\" />\n          <Box>\n            <Typography variant=\"subtitle2\">Attendees</Typography>\n            <Box mb={1} />\n            {sortBy(event.attendees || [], 'email').map(user => (\n              <AttendeeChip key={user.email} user={user} />\n            ))}\n          </Box>\n        </>\n      )}\n    </Box>\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport classnames from 'classnames';\nimport {\n  bindPopover,\n  bindTrigger,\n  usePopupState,\n} from 'material-ui-popup-state/hooks';\nimport React, { useState } from 'react';\n\nimport { useAnalytics } from '@backstage/core-plugin-api';\nimport { Link } from '@backstage/core-components';\n\nimport {\n  Box,\n  Paper,\n  Popover,\n  Tooltip,\n  Typography,\n  makeStyles,\n} from '@material-ui/core';\n\nimport zoomIcon from '../../icons/zoomIcon.svg';\nimport { CalendarEventPopoverContent } from './CalendarEventPopoverContent';\nimport { GCalendarEvent, ResponseStatus } from '../../api';\nimport { getTimePeriod, getZoomLink, isAllDay, isPassed } from './util';\n\nconst useStyles = makeStyles(\n  theme => ({\n    event: {\n      display: 'flex',\n      alignItems: 'center',\n      marginBottom: theme.spacing(1),\n      cursor: 'pointer',\n      paddingRight: 12,\n    },\n    declined: {\n      textDecoration: 'line-through',\n    },\n    passed: {\n      opacity: 0.6,\n      transition: 'opacity 0.15s ease-in-out',\n      '&:hover': {\n        opacity: 1,\n      },\n    },\n    link: {\n      width: 48,\n      height: 48,\n      display: 'inline-block',\n      padding: 8,\n      borderRadius: '50%',\n      '&:hover': {\n        backgroundColor: theme.palette.grey[100],\n      },\n    },\n    calendarColor: ({ event }: { event: GCalendarEvent }) => ({\n      width: 8,\n      borderTopLeftRadius: 4,\n      borderBottomLeftRadius: 4,\n      backgroundColor: event.primary\n        ? theme.palette.primary.light\n        : event.backgroundColor,\n    }),\n  }),\n  {\n    name: 'GCalendarEvent',\n  },\n);\n\nexport const CalendarEvent = ({ event }: { event: GCalendarEvent }) => {\n  const classes = useStyles({ event });\n  const popoverState = usePopupState({\n    variant: 'popover',\n    popupId: event.id,\n    disableAutoFocus: true,\n  });\n  const [hovered, setHovered] = useState(false);\n  const analytics = useAnalytics();\n  const zoomLink = getZoomLink(event);\n\n  const { onClick, ...restBindProps } = bindTrigger(popoverState);\n\n  return (\n    <>\n      <Paper\n        onClick={e => {\n          onClick(e);\n          analytics.captureEvent('click', 'event info');\n        }}\n        {...restBindProps}\n        onMouseEnter={() => setHovered(true)}\n        onMouseLeave={() => setHovered(false)}\n        elevation={hovered ? 4 : 1}\n        className={classnames(classes.event, {\n          [classes.passed]: isPassed(event),\n        })}\n        data-testid=\"calendar-event\"\n      >\n        <Box className={classes.calendarColor} mr={1} alignSelf=\"stretch\" />\n        <Box flex={1} pt={1} pb={1}>\n          <Typography\n            variant=\"subtitle2\"\n            className={classnames({\n              [classes.declined]:\n                event.responseStatus === ResponseStatus.declined,\n            })}\n          >\n            {event.summary}\n          </Typography>\n          {!isAllDay(event) && (\n            <Typography variant=\"body2\" data-testid=\"calendar-event-time\">\n              {getTimePeriod(event)}\n            </Typography>\n          )}\n        </Box>\n\n        {zoomLink && (\n          <Tooltip title=\"Join Zoom Meeting\">\n            <Link\n              data-testid=\"calendar-event-zoom-link\"\n              className={classes.link}\n              to={zoomLink}\n              onClick={e => {\n                e.stopPropagation();\n                analytics.captureEvent('click', 'zoom link');\n              }}\n              noTrack\n            >\n              <img src={zoomIcon} alt=\"Zoom link\" />\n            </Link>\n          </Tooltip>\n        )}\n      </Paper>\n\n      <Popover\n        {...bindPopover(popoverState)}\n        anchorOrigin={{\n          vertical: 'top',\n          horizontal: 'left',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'center',\n        }}\n        data-testid=\"calendar-event-popover\"\n      >\n        <CalendarEventPopoverContent event={event} />\n      </Popover>\n    </>\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { sortBy } from 'lodash';\nimport React from 'react';\n\nimport {\n  Checkbox,\n  FormControl,\n  Input,\n  ListItemText,\n  MenuItem,\n  Select,\n  Typography,\n  makeStyles,\n} from '@material-ui/core';\n\nimport { GCalendar } from '../../api';\n\nconst useStyles = makeStyles(\n  {\n    formControl: {\n      width: 120,\n    },\n    selectedCalendars: {\n      textOverflow: 'ellipsis',\n      overflow: 'hidden',\n    },\n  },\n  {\n    name: 'GCalendarSelect',\n  },\n);\n\ntype CalendarSelectProps = {\n  disabled: boolean;\n  selectedCalendars?: string[];\n  setSelectedCalendars: (value: string[]) => void;\n  calendars: GCalendar[];\n};\n\nexport const CalendarSelect = ({\n  disabled,\n  selectedCalendars = [],\n  setSelectedCalendars,\n  calendars,\n}: CalendarSelectProps) => {\n  const classes = useStyles();\n  return (\n    <FormControl className={classes.formControl}>\n      <Select\n        labelId=\"calendars-label\"\n        disabled={disabled || calendars.length === 0}\n        multiple\n        value={selectedCalendars}\n        onChange={async e => setSelectedCalendars(e.target.value as string[])}\n        input={<Input />}\n        renderValue={selected => (\n          <Typography className={classes.selectedCalendars} variant=\"body2\">\n            {calendars\n              .filter(c => c.id && (selected as string[]).includes(c.id))\n              .map(c => c.summary)\n              .join(', ')}\n          </Typography>\n        )}\n        MenuProps={{\n          PaperProps: {\n            style: {\n              width: 350,\n            },\n          },\n        }}\n      >\n        {sortBy(calendars, 'summary').map(c => (\n          <MenuItem key={c.id} value={c.id}>\n            <Checkbox checked={selectedCalendars.includes(c.id!)} />\n            <ListItemText primary={c.summary} />\n          </MenuItem>\n        ))}\n      </Select>\n    </FormControl>\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { GCalendarEvent } from '../../api';\n\nexport const eventsMock: GCalendarEvent[] = [\n  {\n    id: '1',\n    htmlLink: 'https://www.google.com/calendar/',\n    summary: 'Backstage Community Sessions',\n    start: {\n      dateTime: '2021-12-07T09:00:00+01:00',\n      timeZone: 'Europe/London',\n    },\n    end: {\n      dateTime: '2021-12-07T10:00:00+01:00',\n      timeZone: 'Europe/London',\n    },\n  },\n  {\n    id: '2',\n    htmlLink: 'https://www.google.com/calendar/',\n    summary: 'Backstage Community Sessions',\n    start: {\n      dateTime: '2021-12-07T10:30:00+01:00',\n      timeZone: 'Europe/London',\n    },\n    end: {\n      dateTime: '2021-12-07T10:45:00+01:00',\n      timeZone: 'Europe/London',\n    },\n    conferenceData: {\n      entryPoints: [\n        {\n          entryPointType: 'video',\n          uri: 'https://zoom.us',\n        },\n      ],\n    },\n  },\n  {\n    id: '3',\n    htmlLink: 'https://www.google.com/calendar',\n    summary: 'Backstage Community Sessions',\n    start: {\n      dateTime: '2021-12-07T12:00:00+01:00',\n      timeZone: 'Europe/London',\n    },\n    end: {\n      dateTime: '2021-12-07T13:00:00+01:00',\n      timeZone: 'Europe/London',\n    },\n    conferenceData: {\n      entryPoints: [\n        {\n          entryPointType: 'video',\n          uri: 'https://zoom.us',\n          label: 'zoom.us',\n        },\n      ],\n    },\n  },\n  {\n    id: '4',\n    htmlLink: 'https://www.google.com/calendar',\n    summary: 'Backstage Community Sessions',\n    start: {\n      dateTime: '2021-12-07T15:00:00+01:00',\n      timeZone: 'Europe/London',\n    },\n    end: {\n      dateTime: '2021-12-07T16:30:00+01:00',\n      timeZone: 'Europe/London',\n    },\n    conferenceData: {\n      entryPoints: [\n        {\n          entryPointType: 'video',\n          uri: 'https://zoom.us',\n        },\n      ],\n    },\n  },\n  {\n    id: '5',\n    htmlLink: 'https://www.google.com/calendar',\n    summary: 'Backstage Community Sessions',\n    start: {\n      dateTime: '2021-12-07T17:00:00+01:00',\n      timeZone: 'Europe/London',\n    },\n    end: {\n      dateTime: '2021-12-07T17:30:00+01:00',\n      timeZone: 'Europe/London',\n    },\n    conferenceData: {\n      entryPoints: [\n        {\n          entryPointType: 'video',\n          uri: 'https://zoom.us',\n        },\n      ],\n    },\n  },\n];\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Box, Button, styled } from '@material-ui/core';\nimport { CalendarEvent } from './CalendarEvent';\nimport { eventsMock } from './signInEventMock';\nimport { GCalendarEvent } from '../../api';\n\ntype Props = {\n  handleAuthClick: React.MouseEventHandler<HTMLElement>;\n  events?: GCalendarEvent[];\n};\n\nconst TransparentBox = styled(Box)({\n  opacity: 0.3,\n  filter: 'blur(1.5px)',\n});\n\nexport const SignInContent = ({\n  handleAuthClick,\n  events = eventsMock,\n}: Props) => {\n  return (\n    <Box position=\"relative\" height=\"100%\" width=\"100%\">\n      <TransparentBox p={1}>\n        {events.map(event => (\n          <CalendarEvent key={event.id} event={event} />\n        ))}\n      </TransparentBox>\n\n      <Box\n        height=\"100%\"\n        width=\"100%\"\n        display=\"flex\"\n        justifyContent=\"center\"\n        alignItems=\"center\"\n        position=\"absolute\"\n        left={0}\n        top={0}\n      >\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={handleAuthClick}\n          size=\"large\"\n        >\n          Sign in\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { sortBy } from 'lodash';\nimport { DateTime } from 'luxon';\nimport React, { useState } from 'react';\n\nimport { InfoCard, Progress } from '@backstage/core-components';\nimport { useAnalytics } from '@backstage/core-plugin-api';\n\nimport { Box, IconButton, Typography } from '@material-ui/core';\nimport PrevIcon from '@material-ui/icons/NavigateBefore';\nimport NextIcon from '@material-ui/icons/NavigateNext';\n\nimport {\n  useCalendarsQuery,\n  useEventsQuery,\n  useSignIn,\n  useStoredCalendars,\n} from '../../hooks';\nimport calendarCardIcon from '../../icons/calendarIcon.svg';\nimport { CalendarEvent } from './CalendarEvent';\nimport { CalendarSelect } from './CalendarSelect';\nimport { SignInContent } from './SignInContent';\nimport { getStartDate } from './util';\nimport useAsync from 'react-use/lib/useAsync';\n\nexport const CalendarCard = () => {\n  const [date, setDate] = useState(DateTime.now());\n  const analytics = useAnalytics();\n\n  const changeDay = (offset = 1) => {\n    setDate(prev => prev.plus({ day: offset }));\n    analytics.captureEvent('click', 'change date');\n  };\n\n  const { isSignedIn, isInitialized, signIn } = useSignIn();\n\n  useAsync(async () => signIn(true), [signIn]);\n\n  const {\n    isLoading: isCalendarLoading,\n    isFetching: isCalendarFetching,\n    data: calendars = [],\n  } = useCalendarsQuery({\n    enabled: isSignedIn,\n  });\n  const primaryCalendarId = calendars.find(c => c.primary === true)?.id;\n  const defaultSelectedCalendars = primaryCalendarId ? [primaryCalendarId] : [];\n  const [storedCalendars, setStoredCalendars] = useStoredCalendars(\n    defaultSelectedCalendars,\n  );\n\n  const { events, isLoading: isEventLoading } = useEventsQuery({\n    calendars,\n    selectedCalendars: storedCalendars,\n    enabled: isSignedIn && calendars.length > 0,\n    timeMin: date.startOf('day').toISO()!,\n    timeMax: date.endOf('day').toISO()!,\n    timeZone: date.zoneName ?? 'UTC', // TODO: Use browser timezone? This probably never happens anyway\n  });\n\n  const showLoader =\n    (isCalendarLoading && isCalendarFetching) ||\n    isEventLoading ||\n    !isInitialized;\n\n  return (\n    <InfoCard\n      noPadding\n      title={\n        <Box display=\"flex\" alignItems=\"center\">\n          <Box height={24} width={24} mr={1}>\n            <img src={calendarCardIcon} alt=\"Google Calendar\" />\n          </Box>\n          {isSignedIn ? (\n            <>\n              <IconButton onClick={() => changeDay(-1)} size=\"small\">\n                <PrevIcon />\n              </IconButton>\n              <IconButton onClick={() => changeDay(1)} size=\"small\">\n                <NextIcon />\n              </IconButton>\n              <Box mr={0.5} />\n              <Typography variant=\"h6\">\n                {date.toLocaleString({\n                  weekday: 'short',\n                  month: 'short',\n                  day: 'numeric',\n                })}\n              </Typography>\n\n              <Box flex={1} />\n\n              <CalendarSelect\n                calendars={calendars}\n                selectedCalendars={storedCalendars}\n                setSelectedCalendars={setStoredCalendars}\n                disabled={\n                  (isCalendarFetching && isCalendarLoading) || !isSignedIn\n                }\n              />\n            </>\n          ) : (\n            <Typography variant=\"h6\">Agenda</Typography>\n          )}\n        </Box>\n      }\n      deepLink={{\n        link: 'https://calendar.google.com/',\n        title: 'Go to Calendar',\n      }}\n    >\n      <Box>\n        {showLoader && (\n          <Box py={2}>\n            <Progress variant=\"query\" />\n          </Box>\n        )}\n        {!isSignedIn && isInitialized && (\n          <SignInContent handleAuthClick={() => signIn(false)} />\n        )}\n        {!isEventLoading && !isCalendarLoading && isSignedIn && (\n          <Box p={1} pb={0} maxHeight={602} overflow=\"auto\">\n            {events.length === 0 && (\n              <Box pt={2} pb={2}>\n                <Typography align=\"center\" variant=\"h6\">\n                  No events\n                </Typography>\n              </Box>\n            )}\n            {sortBy(events, [getStartDate]).map(event => (\n              <CalendarEvent\n                key={`${event.calendarId}-${event.id}`}\n                event={event}\n              />\n            ))}\n          </Box>\n        )}\n      </Box>\n    </InfoCard>\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\n\nimport { CalendarCard } from './CalendarCard';\n\nconst queryClient = new QueryClient();\n\nexport const HomePageCalendar = () => {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <CalendarCard />\n    </QueryClientProvider>\n  );\n};\n"],"names":["useStyles"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AA0BO,MAAM,iBAAoB,GAAA,CAAC,EAAE,OAAA,EAAuB,KAAA;AACzD,EAAM,MAAA,WAAA,GAAc,OAAO,eAAe,CAAA,CAAA;AAC1C,EAAM,MAAA,QAAA,GAAW,OAAO,WAAW,CAAA,CAAA;AAEnC,EAAO,OAAA,QAAA;AAAA,IACL,CAAC,WAAW,CAAA;AAAA,IACZ,YAAY;AACV,MAAA,MAAM,YAAY,EAAC,CAAA;AACnB,MAAA,IAAI,KAAQ,GAAA,EAAA,CAAA;AACZ,MAAG,GAAA;AACD,QAAM,MAAA,EAAE,gBAAgB,EAAI,EAAA,KAAA,GAAQ,EAAG,EAAA,GACrC,MAAM,WAAA,CAAY,YAAa,CAAA;AAAA,UAC7B,UAAY,EAAA,GAAA;AAAA,UACZ,aAAe,EAAA,QAAA;AAAA,UACf,SAAW,EAAA,KAAA;AAAA,SACZ,CAAA,CAAA;AACH,QAAQ,KAAA,GAAA,aAAA,CAAA;AACR,QAAU,SAAA,CAAA,IAAA,CAAK,GAAG,KAAK,CAAA,CAAA;AAAA,OAChB,QAAA,KAAA,EAAA;AAET,MAAO,OAAA,SAAA,CAAA;AAAA,KACT;AAAA,IACA;AAAA,MACE,OAAA;AAAA,MACA,gBAAkB,EAAA,IAAA;AAAA,MAClB,eAAiB,EAAA,IAAA;AAAA,MACjB,SAAS,MAAM;AACb,QAAA,QAAA,CAAS,IAAK,CAAA;AAAA,UACZ,IAAM,EAAA,WAAA;AAAA,UACN,OAAS,EAAA,4BAAA;AAAA,SACV,CAAA,CAAA;AAAA,OACH;AAAA,KACF;AAAA,GACF,CAAA;AACF,CAAA;;AC1BO,MAAM,iBAAiB,CAAC;AAAA,EAC7B,oBAAoB,EAAC;AAAA,EACrB,YAAY,EAAC;AAAA,EACb,OAAA;AAAA,EACA,OAAA;AAAA,EACA,OAAA;AAAA,EACA,QAAA;AACF,CAAe,KAAA;AACb,EAAM,MAAA,WAAA,GAAc,OAAO,eAAe,CAAA,CAAA;AAC1C,EAAA,MAAM,eAAe,UAAW,CAAA;AAAA,IAC9B,OAAS,EAAA,iBAAA,CACN,MAAO,CAAA,CAAA,EAAA,KAAM,SAAU,CAAA,IAAA,CAAK,CAAK,CAAA,KAAA,CAAA,CAAE,EAAO,KAAA,EAAE,CAAC,CAAA,CAC7C,IAAI,CAAc,UAAA,KAAA;AACjB,MAAA,MAAM,WAAW,SAAU,CAAA,IAAA,CAAK,CAAK,CAAA,KAAA,CAAA,CAAE,OAAO,UAAU,CAAA,CAAA;AAExD,MAAO,OAAA;AAAA,QACL,QAAU,EAAA,CAAC,gBAAkB,EAAA,UAAA,EAAY,SAAS,OAAO,CAAA;AAAA,QACzD,OAAA;AAAA,QACA,aAAa,EAAC;AAAA,QACd,eAAiB,EAAA,GAAA;AAAA,QACjB,2BAA6B,EAAA,IAAA;AAAA,QAE7B,SAAS,YAAuC;AAC9C,UAAA,MAAM,IAAO,GAAA,MAAM,WAAY,CAAA,SAAA,CAAU,UAAY,EAAA;AAAA,YACnD,UAAA;AAAA,YACA,OAAA;AAAA,YACA,OAAA;AAAA,YACA,WAAa,EAAA,KAAA;AAAA,YACb,YAAc,EAAA,IAAA;AAAA,YACd,UAAY,EAAA,GAAA;AAAA,YACZ,OAAS,EAAA,WAAA;AAAA,YACT,QAAA;AAAA,WACD,CAAA,CAAA;AAED,UAAA,OAAA,CAAQ,IAAK,CAAA,KAAA,IAAS,EAAC,EAAG,IAAI,CAAS,KAAA,KAAA;AApEnD,YAAA,IAAA,EAAA,EAAA,EAAA,CAAA;AAqEc,YAAM,MAAA,cAAA,GAAA,CAAiB,EAAM,GAAA,CAAA,EAAA,GAAA,KAAA,CAAA,SAAA,KAAN,IAAiB,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,IAAA;AAAA,cACtC,CAAA,CAAA,KAAK,CAAC,CAAC,CAAE,CAAA,IAAA;AAAA,aAAA,KADY,IAEpB,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,cAAA,CAAA;AAEH,YAAO,OAAA;AAAA,cACL,GAAG,KAAA;AAAA,cACH,OAAS,EAAA,QAAA,CAAS,KAAM,CAAA,OAAA,IAAW,EAAE,CAAA;AAAA,cACrC,UAAA;AAAA,cACA,iBAAiB,QAAU,IAAA,IAAA,GAAA,KAAA,CAAA,GAAA,QAAA,CAAA,eAAA;AAAA,cAC3B,OAAA,EAAS,CAAC,EAAC,QAAU,IAAA,IAAA,GAAA,KAAA,CAAA,GAAA,QAAA,CAAA,OAAA,CAAA;AAAA,cACrB,cAAA;AAAA,aACF,CAAA;AAAA,WACD,CAAA,CAAA;AAAA,SACH;AAAA,OACF,CAAA;AAAA,KACD,CAAA;AAAA,GACJ,CAAA,CAAA;AAED,EAAA,MAAM,MAAS,GAAA,OAAA;AAAA,IACb,MAAM,OAAQ,CAAA,YAAA,CAAa,GAAI,CAAA,CAAC,EAAE,IAAA,EAAW,KAAA,IAAI,CAAE,CAAA,IAAA,EAAM,CAAA;AAAA,IACzD,CAAC,YAAY,CAAA;AAAA,GACf,CAAA;AAEA,EAAM,MAAA,SAAA,GACJ,CAAC,CAAC,YAAa,CAAA,IAAA,CAAK,OAAK,CAAE,CAAA,UAAU,CAAK,IAAA,MAAA,CAAO,MAAW,KAAA,CAAA,CAAA;AAE9D,EAAO,OAAA,EAAE,QAAQ,SAAU,EAAA,CAAA;AAC7B,CAAA;;AC7EO,MAAM,YAAY,MAAM;AAC7B,EAAA,MAAM,CAAC,UAAA,EAAY,WAAW,CAAA,GAAI,SAAS,KAAK,CAAA,CAAA;AAChD,EAAA,MAAM,CAAC,aAAA,EAAe,cAAc,CAAA,GAAI,SAAS,KAAK,CAAA,CAAA;AACtD,EAAM,MAAA,OAAA,GAAU,OAAO,gBAAgB,CAAA,CAAA;AAEvC,EAAA,MAAM,MAAS,GAAA,WAAA;AAAA,IACb,OAAO,WAAW,KAAU,KAAA;AAC1B,MAAM,MAAA,KAAA,GAAQ,MAAM,OAAQ,CAAA,cAAA;AAAA,QAC1B;AAAA,UACE,mDAAA;AAAA,UACA,gDAAA;AAAA,SACF;AAAA,QACA;AAAA,UACE,QAAA;AAAA,UACA,cAAc,CAAC,QAAA;AAAA,SACjB;AAAA,OACF,CAAA;AAEA,MAAY,WAAA,CAAA,CAAC,CAAC,KAAK,CAAA,CAAA;AACnB,MAAA,cAAA,CAAe,IAAI,CAAA,CAAA;AAAA,KACrB;AAAA,IACA,CAAC,SAAS,WAAW,CAAA;AAAA,GACvB,CAAA;AAEA,EAAO,OAAA,EAAE,UAAY,EAAA,aAAA,EAAe,MAAO,EAAA,CAAA;AAC7C,CAAA;;ACpBO,SAAS,mBACd,YACuC,EAAA;AACvC,EAAM,MAAA,aAAA,GAAgB,gBAAgB,KAAM,EAAA,CAAA;AAC5C,EAAA,MAAM,UAAa,GAAA,2BAAA,yBAAA;AACnB,EAAA,MAAM,UAAa,GAAA,MAAA,CAAO,aAAa,CAAA,CAAE,UAAU,aAAa,CAAA,CAAA;AAChE,EAAM,MAAA,QAAA,GAAW,CAAC,KAAoB,KAAA;AACpC,IAAW,UAAA,CAAA,GAAA,CAAI,YAAY,KAAK,CAAA,CAAA;AAAA,GAClC,CAAA;AACA,EAAA,MAAM,QAAW,GAAA,aAAA;AAAA,IACf,UAAA,CAAW,SAAmB,UAAU,CAAA;AAAA,IACxC,UAAA,CAAW,SAAS,UAAU,CAAA;AAAA,GAChC,CAAA;AACA,EAAI,IAAA,MAAA,CAAA;AACJ,EAAI,IAAA,QAAA,CAAS,aAAa,QAAU,EAAA;AAClC,IAAS,MAAA,GAAA,YAAA,CAAA;AAAA,GACJ,MAAA;AACL,IAAA,MAAA,GAAS,QAAS,CAAA,KAAA,CAAA;AAAA,GACpB;AACA,EAAO,OAAA,CAAC,QAAQ,QAAQ,CAAA,CAAA;AAC1B;;ACtBA,MAAMA,WAAA,GAAY,WAAW,CAAS,KAAA,KAAA;AACpC,EAAM,MAAA,YAAA,GAAe,CAAC,cAA4B,KAAA;AAChD,IAAA,IAAI,CAAC,cAAA;AAAgB,MAAO,OAAA,KAAA,CAAM,QAAQ,OAAQ,CAAA,KAAA,CAAA;AAElD,IAAO,OAAA;AAAA,MACL,CAAC,cAAe,CAAA,QAAQ,GAAG,KAAA,CAAM,QAAQ,MAAO,CAAA,EAAA;AAAA,MAChD,CAAC,cAAe,CAAA,QAAQ,GAAG,KAAA,CAAM,QAAQ,MAAO,CAAA,KAAA;AAAA,MAChD,cAAc,CAAA,CAAA;AAAA,GAClB,CAAA;AAEA,EAAO,OAAA;AAAA,IACL,cAAgB,EAAA;AAAA,MACd,OAAO,CAAC,EAAE,cAAe,EAAA,KACvB,aAAa,cAAc,CAAA;AAAA,KAC/B;AAAA,IACA,KAAO,EAAA;AAAA,MACL,KAAO,EAAA,EAAA;AAAA,MACP,GAAK,EAAA,CAAA;AAAA,MACL,OAAS,EAAA;AAAA,QACP,MAAQ,EAAA,EAAA;AAAA,QACR,KAAO,EAAA,EAAA;AAAA,QACP,UAAA,EAAY,KAAM,CAAA,OAAA,CAAQ,MAAO,CAAA,KAAA;AAAA,OACnC;AAAA,KACF;AAAA,GACF,CAAA;AACF,CAAC,CAAA,CAAA;AAED,MAAM,YAAe,GAAA,CAAC,EAAE,cAAA,EAA0B,KAAA;AAChD,EAAI,IAAA,cAAA,KAAmB,eAAe,QAAU,EAAA;AAC9C,IAAO,uBAAA,KAAA,CAAA,aAAA,CAAC,SAAU,EAAA,EAAA,aAAA,EAAY,eAAgB,EAAA,CAAA,CAAA;AAAA,GAChD;AACA,EAAI,IAAA,cAAA,KAAmB,eAAe,QAAU,EAAA;AAC9C,IAAO,uBAAA,KAAA,CAAA,aAAA,CAAC,UAAW,EAAA,EAAA,aAAA,EAAY,eAAgB,EAAA,CAAA,CAAA;AAAA,GACjD;AAEA,EAAO,OAAA,IAAA,CAAA;AACT,CAAA,CAAA;AAMO,MAAM,YAAe,GAAA,CAAC,EAAE,IAAA,EAA8B,KAAA;AAC3D,EAAA,MAAM,UAAUA,WAAU,CAAA,EAAE,cAAgB,EAAA,IAAA,CAAK,gBAAgB,CAAA,CAAA;AAEjE,EACE,uBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,KAAA;AAAA,IAAA;AAAA,MACC,OAAS,EAAA;AAAA,QACP,MAAM,OAAQ,CAAA,cAAA;AAAA,QACd,OAAO,OAAQ,CAAA,KAAA;AAAA,OACjB;AAAA,MACA,YAAc,kBAAA,KAAA,CAAA,aAAA,CAAC,YAAa,EAAA,EAAA,cAAA,EAAgB,KAAK,cAAgB,EAAA,CAAA;AAAA,KAAA;AAAA,oBAEjE,KAAA,CAAA,aAAA;AAAA,MAAC,IAAA;AAAA,MAAA;AAAA,QACC,IAAK,EAAA,OAAA;AAAA,QACL,OAAQ,EAAA,UAAA;AAAA,QACR,OAAO,IAAK,CAAA,KAAA;AAAA,QACZ,KAAM,EAAA,SAAA;AAAA,OAAA;AAAA,KACR;AAAA,GACF,CAAA;AAEJ,CAAA;;AChEO,SAAS,YAAY,KAAuB,EAAA;AAnBnD,EAAA,IAAA,EAAA,EAAA,EAAA,EAAA,EAAA,CAAA;AAoBE,EAAA,MAAM,eAAkB,GAAA,CAAA,EAAA,GAAA,CAAA,EAAA,GAAA,KAAA,CAAM,cAAN,KAAA,IAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAsB,gBAAtB,IAAmC,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,IAAA;AAAA,IACzD,CAAA,CAAA,KAAK,EAAE,cAAmB,KAAA,OAAA;AAAA,GAAA,CAAA;AAG5B,EAAO,OAAA,CAAA,EAAA,GAAA,eAAA,IAAA,IAAA,GAAA,KAAA,CAAA,GAAA,eAAA,CAAiB,QAAjB,IAAwB,GAAA,EAAA,GAAA,EAAA,CAAA;AACjC,CAAA;AAEO,SAAS,cAAc,KAAuB,EAAA;AA3BrD,EAAA,IAAA,EAAA,EAAA,EAAA,CAAA;AA4BE,EAAI,IAAA,QAAA,CAAS,KAAK,CAAG,EAAA;AACnB,IAAA,OAAO,oBAAoB,KAAK,CAAA,CAAA;AAAA,GAClC;AAEA,EAAA,MAAM,MAAqC,GAAA;AAAA,IACzC,IAAM,EAAA,SAAA;AAAA,IACN,MAAQ,EAAA,SAAA;AAAA,GACV,CAAA;AAEA,EAAA,MAAM,YAAY,QAAS,CAAA,OAAA,CAAA,CAAA,CAAQ,WAAM,KAAN,KAAA,IAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAa,aAAY,EAAE,CAAA,CAAA;AAC9D,EAAA,MAAM,UAAU,QAAS,CAAA,OAAA,CAAA,CAAA,CAAQ,WAAM,GAAN,KAAA,IAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAW,aAAY,EAAE,CAAA,CAAA;AAE1D,EAAA,OAAO,GAAG,SAAU,CAAA,cAAA,CAAe,MAAM,CAAC,MAAM,OAAQ,CAAA,cAAA;AAAA,IACtD,MAAA;AAAA,GACD,CAAA,CAAA,CAAA;AACH,CAAA;AAEA,SAAS,oBAAoB,KAAuB,EAAA;AA7CpD,EAAA,IAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,CAAA;AA8CE,EAAA,MAAM,MAAqC,GAAA,EAAE,KAAO,EAAA,MAAA,EAAQ,KAAK,SAAU,EAAA,CAAA;AAC3E,EAAA,MAAM,YAAY,QAAS,CAAA,OAAA;AAAA,IAAA,CAAA,CACzB,WAAM,KAAN,KAAA,IAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAa,eAAY,EAAM,GAAA,KAAA,CAAA,KAAA,KAAN,mBAAa,IAAQ,CAAA,IAAA,EAAA;AAAA,GAChD,CAAA;AACA,EAAA,MAAM,UAAU,QAAS,CAAA,OAAA;AAAA,IAAA,CAAA,CACvB,WAAM,GAAN,KAAA,IAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAW,eAAY,EAAM,GAAA,KAAA,CAAA,GAAA,KAAN,mBAAW,IAAQ,CAAA,IAAA,EAAA;AAAA,GAC1C,CAAA,KAAA,CAAM,EAAE,GAAA,EAAK,GAAG,CAAA,CAAA;AAElB,EAAA,IAAI,SAAU,CAAA,KAAA,EAAY,KAAA,OAAA,CAAQ,OAAS,EAAA;AACzC,IAAO,OAAA,SAAA,CAAU,eAAe,MAAM,CAAA,CAAA;AAAA,GACxC;AAEA,EAAA,OAAO,GAAG,SAAU,CAAA,cAAA,CAAe,MAAM,CAAC,MAAM,OAAQ,CAAA,cAAA;AAAA,IACtD,MAAA;AAAA,GACD,CAAA,CAAA,CAAA;AACH,CAAA;AAEO,SAAS,SAAS,KAAuB,EAAA;AA/DhD,EAAA,IAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,CAAA;AAgEE,EAAI,IAAA,EAAA,CAAC,WAAM,GAAN,KAAA,IAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAW,aAAY,EAAC,CAAA,EAAA,GAAA,KAAA,CAAM,QAAN,IAAW,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,IAAA,CAAA;AAAM,IAAO,OAAA,KAAA,CAAA;AACrD,EAAM,MAAA,SAAA,GAAY,QAAS,CAAA,OAAA,CAAA,CAAA,CAAQ,EAAM,GAAA,KAAA,CAAA,GAAA,KAAN,mBAAW,QAAY,MAAA,CAAA,EAAA,GAAA,KAAA,CAAM,GAAN,KAAA,IAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAW,IAAK,CAAA,CAAA,CAAA;AAC1E,EAAO,OAAA,QAAA,CAAS,KAAS,IAAA,SAAA,CAAA;AAC3B,CAAA;AAEO,SAAS,SAAS,KAAuB,EAAA;AArEhD,EAAA,IAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,CAAA;AAsEE,EAAA,IAAA,CAAA,CAAI,WAAM,KAAN,KAAA,IAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAa,WAAQ,EAAM,GAAA,KAAA,CAAA,GAAA,KAAN,mBAAW,IAAM,CAAA,EAAA;AACxC,IAAO,OAAA,IAAA,CAAA;AAAA,GACT;AACA,EAAA,MAAM,YAAY,QAAS,CAAA,OAAA,CAAA,CAAA,CAAQ,WAAM,KAAN,KAAA,IAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAa,aAAY,EAAE,CAAA,CAAA;AAC9D,EAAA,MAAM,UAAU,QAAS,CAAA,OAAA,CAAA,CAAA,CAAQ,WAAM,GAAN,KAAA,IAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAW,aAAY,EAAE,CAAA,CAAA;AAE1D,EAAA,OAAO,OAAQ,CAAA,IAAA,CAAK,SAAW,EAAA,KAAK,EAAE,IAAQ,IAAA,CAAA,CAAA;AAChD,CAAA;AAEO,SAAS,aAAa,KAAuB,EAAA;AA/EpD,EAAA,IAAA,EAAA,EAAA,EAAA,CAAA;AAgFE,EAAO,OAAA,QAAA,CAAS,OAAQ,CAAA,CAAA,CAAA,EAAA,GAAA,KAAA,CAAM,KAAN,KAAA,IAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAa,eAAY,EAAM,GAAA,KAAA,CAAA,KAAA,KAAN,IAAa,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,IAAA,CAAA,IAAQ,EAAE,CAAA,CAAA;AAC1E;;AC9CA,MAAMA,WAAY,GAAA,UAAA;AAAA,EAChB,CAAS,KAAA,KAAA;AACP,IAAO,OAAA;AAAA,MACL,WAAa,EAAA;AAAA,QACX,SAAW,EAAA,YAAA;AAAA,QACX,KAAO,EAAA;AAAA,UACL,KAAA,EAAO,KAAM,CAAA,OAAA,CAAQ,OAAQ,CAAA,IAAA;AAAA,UAC7B,UAAY,EAAA,GAAA;AAAA,SACd;AAAA,OACF;AAAA,MACA,OAAS,EAAA;AAAA,QACP,SAAA,EAAW,KAAM,CAAA,OAAA,CAAQ,CAAC,CAAA;AAAA,QAC1B,YAAA,EAAc,KAAM,CAAA,OAAA,CAAQ,CAAC,CAAA;AAAA,OAC/B;AAAA,KACF,CAAA;AAAA,GACF;AAAA,EACA;AAAA,IACE,IAAM,EAAA,8BAAA;AAAA,GACR;AACF,CAAA,CAAA;AAMO,MAAM,8BAA8B,CAAC;AAAA,EAC1C,KAAA;AACF,CAAiC,KAAA;AAC/B,EAAA,MAAM,OAAU,GAAAA,WAAA,CAAU,EAAE,KAAA,EAAO,CAAA,CAAA;AACnC,EAAA,MAAM,YAAY,YAAa,EAAA,CAAA;AAC/B,EAAM,MAAA,QAAA,GAAW,YAAY,KAAK,CAAA,CAAA;AAElC,EAAA,2CACG,GAAI,EAAA,EAAA,OAAA,EAAQ,QAAO,aAAc,EAAA,QAAA,EAAS,OAAO,GAAK,EAAA,CAAA,EAAG,CACxD,EAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,OAAI,OAAQ,EAAA,MAAA,EAAO,YAAW,QAC7B,EAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,OAAI,IAAM,EAAA,CAAA,EAAA,kBACR,KAAA,CAAA,aAAA,CAAA,UAAA,EAAA,EAAW,SAAQ,IAAM,EAAA,EAAA,KAAA,CAAM,OAAQ,CACxC,kBAAA,KAAA,CAAA,aAAA,CAAC,cAAW,OAAQ,EAAA,WAAA,EAAA,EAAa,cAAc,KAAK,CAAE,CACxD,CACC,EAAA,KAAA,CAAM,4BACJ,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA,EAAQ,OAAM,kBACb,EAAA,kBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,IAAA;AAAA,IAAA;AAAA,MACC,aAAY,EAAA,oBAAA;AAAA,MACZ,IAAI,KAAM,CAAA,QAAA;AAAA,MACV,OAAS,EAAA,CAAA,EAAA,KACP,SAAU,CAAA,YAAA,CAAa,SAAS,kBAAkB,CAAA;AAAA,MAEpD,OAAO,EAAA,IAAA;AAAA,KAAA;AAAA,oBAEN,KAAA,CAAA,aAAA,CAAA,UAAA,EAAA,IAAA,kBACE,KAAA,CAAA,aAAA,CAAA,gBAAA,EAAA,IAAiB,CACpB,CAAA;AAAA,GAEJ,CAEJ,CAAA,EACC,QACC,oBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,IAAA;AAAA,IAAA;AAAA,MACC,EAAI,EAAA,QAAA;AAAA,MACJ,OAAS,EAAA,CAAA,EAAA,KAAM,SAAU,CAAA,YAAA,CAAa,SAAS,WAAW,CAAA;AAAA,MAC1D,OAAO,EAAA,IAAA;AAAA,KAAA;AAAA,IACR,mBAAA;AAAA,GAED,EAGD,KAAM,CAAA,WAAA,oBAEH,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,OAAQ,EAAA,EAAA,SAAA,EAAW,OAAQ,CAAA,OAAA,EAAS,OAAQ,EAAA,WAAA,EAAY,CACzD,kBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,GAAA;AAAA,IAAA;AAAA,MACC,WAAW,OAAQ,CAAA,WAAA;AAAA,MACnB,uBAAyB,EAAA;AAAA,QACvB,MAAQ,EAAA,SAAA,CAAU,QAAS,CAAA,KAAA,CAAM,WAAa,EAAA;AAAA,UAC5C,YAAA,EAAc,EAAE,IAAA,EAAM,IAAK,EAAA;AAAA,SAC5B,CAAA;AAAA,OACH;AAAA,KAAA;AAAA,GAEJ,GAGD,KAAM,CAAA,SAAA,8EAEF,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA,EAAQ,WAAW,OAAQ,CAAA,OAAA,EAAS,SAAQ,WAAY,EAAA,CAAA,sCACxD,GACC,EAAA,IAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,cAAW,OAAQ,EAAA,WAAA,EAAA,EAAY,WAAS,CACzC,kBAAA,KAAA,CAAA,aAAA,CAAC,OAAI,EAAI,EAAA,CAAA,EAAG,GACX,MAAO,CAAA,KAAA,CAAM,aAAa,EAAC,EAAG,OAAO,CAAE,CAAA,GAAA,CAAI,0BACzC,KAAA,CAAA,aAAA,CAAA,YAAA,EAAA,EAAa,KAAK,IAAK,CAAA,KAAA,EAAO,MAAY,CAC5C,CACH,CACF,CAEJ,CAAA,CAAA;AAEJ,CAAA;;ACzFA,MAAMA,WAAY,GAAA,UAAA;AAAA,EAChB,CAAU,KAAA,MAAA;AAAA,IACR,KAAO,EAAA;AAAA,MACL,OAAS,EAAA,MAAA;AAAA,MACT,UAAY,EAAA,QAAA;AAAA,MACZ,YAAA,EAAc,KAAM,CAAA,OAAA,CAAQ,CAAC,CAAA;AAAA,MAC7B,MAAQ,EAAA,SAAA;AAAA,MACR,YAAc,EAAA,EAAA;AAAA,KAChB;AAAA,IACA,QAAU,EAAA;AAAA,MACR,cAAgB,EAAA,cAAA;AAAA,KAClB;AAAA,IACA,MAAQ,EAAA;AAAA,MACN,OAAS,EAAA,GAAA;AAAA,MACT,UAAY,EAAA,2BAAA;AAAA,MACZ,SAAW,EAAA;AAAA,QACT,OAAS,EAAA,CAAA;AAAA,OACX;AAAA,KACF;AAAA,IACA,IAAM,EAAA;AAAA,MACJ,KAAO,EAAA,EAAA;AAAA,MACP,MAAQ,EAAA,EAAA;AAAA,MACR,OAAS,EAAA,cAAA;AAAA,MACT,OAAS,EAAA,CAAA;AAAA,MACT,YAAc,EAAA,KAAA;AAAA,MACd,SAAW,EAAA;AAAA,QACT,eAAiB,EAAA,KAAA,CAAM,OAAQ,CAAA,IAAA,CAAK,GAAG,CAAA;AAAA,OACzC;AAAA,KACF;AAAA,IACA,aAAe,EAAA,CAAC,EAAE,KAAA,EAAwC,MAAA;AAAA,MACxD,KAAO,EAAA,CAAA;AAAA,MACP,mBAAqB,EAAA,CAAA;AAAA,MACrB,sBAAwB,EAAA,CAAA;AAAA,MACxB,iBAAiB,KAAM,CAAA,OAAA,GACnB,MAAM,OAAQ,CAAA,OAAA,CAAQ,QACtB,KAAM,CAAA,eAAA;AAAA,KACZ,CAAA;AAAA,GACF,CAAA;AAAA,EACA;AAAA,IACE,IAAM,EAAA,gBAAA;AAAA,GACR;AACF,CAAA,CAAA;AAEO,MAAM,aAAgB,GAAA,CAAC,EAAE,KAAA,EAAuC,KAAA;AACrE,EAAA,MAAM,OAAU,GAAAA,WAAA,CAAU,EAAE,KAAA,EAAO,CAAA,CAAA;AACnC,EAAA,MAAM,eAAe,aAAc,CAAA;AAAA,IACjC,OAAS,EAAA,SAAA;AAAA,IACT,SAAS,KAAM,CAAA,EAAA;AAAA,IACf,gBAAkB,EAAA,IAAA;AAAA,GACnB,CAAA,CAAA;AACD,EAAA,MAAM,CAAC,OAAA,EAAS,UAAU,CAAA,GAAI,SAAS,KAAK,CAAA,CAAA;AAC5C,EAAA,MAAM,YAAY,YAAa,EAAA,CAAA;AAC/B,EAAM,MAAA,QAAA,GAAW,YAAY,KAAK,CAAA,CAAA;AAElC,EAAA,MAAM,EAAE,OAAS,EAAA,GAAG,aAAc,EAAA,GAAI,YAAY,YAAY,CAAA,CAAA;AAE9D,EAAA,uBAEI,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,kBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,KAAA;AAAA,IAAA;AAAA,MACC,SAAS,CAAK,CAAA,KAAA;AACZ,QAAA,OAAA,CAAQ,CAAC,CAAA,CAAA;AACT,QAAU,SAAA,CAAA,YAAA,CAAa,SAAS,YAAY,CAAA,CAAA;AAAA,OAC9C;AAAA,MACC,GAAG,aAAA;AAAA,MACJ,YAAA,EAAc,MAAM,UAAA,CAAW,IAAI,CAAA;AAAA,MACnC,YAAA,EAAc,MAAM,UAAA,CAAW,KAAK,CAAA;AAAA,MACpC,SAAA,EAAW,UAAU,CAAI,GAAA,CAAA;AAAA,MACzB,SAAA,EAAW,UAAW,CAAA,OAAA,CAAQ,KAAO,EAAA;AAAA,QACnC,CAAC,OAAA,CAAQ,MAAM,GAAG,SAAS,KAAK,CAAA;AAAA,OACjC,CAAA;AAAA,MACD,aAAY,EAAA,gBAAA;AAAA,KAAA;AAAA,oBAEZ,KAAA,CAAA,aAAA,CAAC,OAAI,SAAW,EAAA,OAAA,CAAQ,eAAe,EAAI,EAAA,CAAA,EAAG,WAAU,SAAU,EAAA,CAAA;AAAA,wCACjE,GAAI,EAAA,EAAA,IAAA,EAAM,GAAG,EAAI,EAAA,CAAA,EAAG,IAAI,CACvB,EAAA,kBAAA,KAAA,CAAA,aAAA;AAAA,MAAC,UAAA;AAAA,MAAA;AAAA,QACC,OAAQ,EAAA,WAAA;AAAA,QACR,WAAW,UAAW,CAAA;AAAA,UACpB,CAAC,OAAQ,CAAA,QAAQ,GACf,KAAA,CAAM,mBAAmB,cAAe,CAAA,QAAA;AAAA,SAC3C,CAAA;AAAA,OAAA;AAAA,MAEA,KAAM,CAAA,OAAA;AAAA,KAER,EAAA,CAAC,QAAS,CAAA,KAAK,qBACb,KAAA,CAAA,aAAA,CAAA,UAAA,EAAA,EAAW,OAAQ,EAAA,OAAA,EAAQ,aAAY,EAAA,qBAAA,EAAA,EACrC,aAAc,CAAA,KAAK,CACtB,CAEJ,CAAA;AAAA,IAEC,QACC,oBAAA,KAAA,CAAA,aAAA,CAAC,OAAQ,EAAA,EAAA,KAAA,EAAM,mBACb,EAAA,kBAAA,KAAA,CAAA,aAAA;AAAA,MAAC,IAAA;AAAA,MAAA;AAAA,QACC,aAAY,EAAA,0BAAA;AAAA,QACZ,WAAW,OAAQ,CAAA,IAAA;AAAA,QACnB,EAAI,EAAA,QAAA;AAAA,QACJ,SAAS,CAAK,CAAA,KAAA;AACZ,UAAA,CAAA,CAAE,eAAgB,EAAA,CAAA;AAClB,UAAU,SAAA,CAAA,YAAA,CAAa,SAAS,WAAW,CAAA,CAAA;AAAA,SAC7C;AAAA,QACA,OAAO,EAAA,IAAA;AAAA,OAAA;AAAA,sBAEN,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA,EAAI,GAAK,EAAA,QAAA,EAAU,KAAI,WAAY,EAAA,CAAA;AAAA,KAExC,CAAA;AAAA,GAIJ,kBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,OAAA;AAAA,IAAA;AAAA,MACE,GAAG,YAAY,YAAY,CAAA;AAAA,MAC5B,YAAc,EAAA;AAAA,QACZ,QAAU,EAAA,KAAA;AAAA,QACV,UAAY,EAAA,MAAA;AAAA,OACd;AAAA,MACA,eAAiB,EAAA;AAAA,QACf,QAAU,EAAA,KAAA;AAAA,QACV,UAAY,EAAA,QAAA;AAAA,OACd;AAAA,MACA,aAAY,EAAA,wBAAA;AAAA,KAAA;AAAA,oBAEZ,KAAA,CAAA,aAAA,CAAC,+BAA4B,KAAc,EAAA,CAAA;AAAA,GAE/C,CAAA,CAAA;AAEJ,CAAA;;ACrIA,MAAM,SAAY,GAAA,UAAA;AAAA,EAChB;AAAA,IACE,WAAa,EAAA;AAAA,MACX,KAAO,EAAA,GAAA;AAAA,KACT;AAAA,IACA,iBAAmB,EAAA;AAAA,MACjB,YAAc,EAAA,UAAA;AAAA,MACd,QAAU,EAAA,QAAA;AAAA,KACZ;AAAA,GACF;AAAA,EACA;AAAA,IACE,IAAM,EAAA,iBAAA;AAAA,GACR;AACF,CAAA,CAAA;AASO,MAAM,iBAAiB,CAAC;AAAA,EAC7B,QAAA;AAAA,EACA,oBAAoB,EAAC;AAAA,EACrB,oBAAA;AAAA,EACA,SAAA;AACF,CAA2B,KAAA;AACzB,EAAA,MAAM,UAAU,SAAU,EAAA,CAAA;AAC1B,EAAA,uBACG,KAAA,CAAA,aAAA,CAAA,WAAA,EAAA,EAAY,SAAW,EAAA,OAAA,CAAQ,WAC9B,EAAA,kBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,MAAA;AAAA,IAAA;AAAA,MACC,OAAQ,EAAA,iBAAA;AAAA,MACR,QAAA,EAAU,QAAY,IAAA,SAAA,CAAU,MAAW,KAAA,CAAA;AAAA,MAC3C,QAAQ,EAAA,IAAA;AAAA,MACR,KAAO,EAAA,iBAAA;AAAA,MACP,UAAU,OAAM,CAAA,KAAK,oBAAqB,CAAA,CAAA,CAAE,OAAO,KAAiB,CAAA;AAAA,MACpE,KAAA,sCAAQ,KAAM,EAAA,IAAA,CAAA;AAAA,MACd,WAAA,EAAa,CACX,QAAA,qBAAA,KAAA,CAAA,aAAA,CAAC,UAAW,EAAA,EAAA,SAAA,EAAW,OAAQ,CAAA,iBAAA,EAAmB,OAAQ,EAAA,OAAA,EAAA,EACvD,SACE,CAAA,MAAA,CAAO,CAAK,CAAA,KAAA,CAAA,CAAE,EAAO,IAAA,QAAA,CAAsB,QAAS,CAAA,CAAA,CAAE,EAAE,CAAC,CACzD,CAAA,GAAA,CAAI,CAAK,CAAA,KAAA,CAAA,CAAE,OAAO,CAAA,CAClB,IAAK,CAAA,IAAI,CACd,CAAA;AAAA,MAEF,SAAW,EAAA;AAAA,QACT,UAAY,EAAA;AAAA,UACV,KAAO,EAAA;AAAA,YACL,KAAO,EAAA,GAAA;AAAA,WACT;AAAA,SACF;AAAA,OACF;AAAA,KAAA;AAAA,IAEC,MAAO,CAAA,SAAA,EAAW,SAAS,CAAA,CAAE,GAAI,CAAA,CAAA,CAAA,qBAC/B,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA,EAAS,GAAK,EAAA,CAAA,CAAE,EAAI,EAAA,KAAA,EAAO,CAAE,CAAA,EAAA,EAAA,kBAC3B,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA,EAAS,OAAS,EAAA,iBAAA,CAAkB,QAAS,CAAA,CAAA,CAAE,EAAG,CAAA,EAAG,CACtD,kBAAA,KAAA,CAAA,aAAA,CAAC,YAAa,EAAA,EAAA,OAAA,EAAS,CAAE,CAAA,OAAA,EAAS,CACpC,CACD,CAAA;AAAA,GAEL,CAAA,CAAA;AAEJ,CAAA;;AC7EO,MAAM,UAA+B,GAAA;AAAA,EAC1C;AAAA,IACE,EAAI,EAAA,GAAA;AAAA,IACJ,QAAU,EAAA,kCAAA;AAAA,IACV,OAAS,EAAA,8BAAA;AAAA,IACT,KAAO,EAAA;AAAA,MACL,QAAU,EAAA,2BAAA;AAAA,MACV,QAAU,EAAA,eAAA;AAAA,KACZ;AAAA,IACA,GAAK,EAAA;AAAA,MACH,QAAU,EAAA,2BAAA;AAAA,MACV,QAAU,EAAA,eAAA;AAAA,KACZ;AAAA,GACF;AAAA,EACA;AAAA,IACE,EAAI,EAAA,GAAA;AAAA,IACJ,QAAU,EAAA,kCAAA;AAAA,IACV,OAAS,EAAA,8BAAA;AAAA,IACT,KAAO,EAAA;AAAA,MACL,QAAU,EAAA,2BAAA;AAAA,MACV,QAAU,EAAA,eAAA;AAAA,KACZ;AAAA,IACA,GAAK,EAAA;AAAA,MACH,QAAU,EAAA,2BAAA;AAAA,MACV,QAAU,EAAA,eAAA;AAAA,KACZ;AAAA,IACA,cAAgB,EAAA;AAAA,MACd,WAAa,EAAA;AAAA,QACX;AAAA,UACE,cAAgB,EAAA,OAAA;AAAA,UAChB,GAAK,EAAA,iBAAA;AAAA,SACP;AAAA,OACF;AAAA,KACF;AAAA,GACF;AAAA,EACA;AAAA,IACE,EAAI,EAAA,GAAA;AAAA,IACJ,QAAU,EAAA,iCAAA;AAAA,IACV,OAAS,EAAA,8BAAA;AAAA,IACT,KAAO,EAAA;AAAA,MACL,QAAU,EAAA,2BAAA;AAAA,MACV,QAAU,EAAA,eAAA;AAAA,KACZ;AAAA,IACA,GAAK,EAAA;AAAA,MACH,QAAU,EAAA,2BAAA;AAAA,MACV,QAAU,EAAA,eAAA;AAAA,KACZ;AAAA,IACA,cAAgB,EAAA;AAAA,MACd,WAAa,EAAA;AAAA,QACX;AAAA,UACE,cAAgB,EAAA,OAAA;AAAA,UAChB,GAAK,EAAA,iBAAA;AAAA,UACL,KAAO,EAAA,SAAA;AAAA,SACT;AAAA,OACF;AAAA,KACF;AAAA,GACF;AAAA,EACA;AAAA,IACE,EAAI,EAAA,GAAA;AAAA,IACJ,QAAU,EAAA,iCAAA;AAAA,IACV,OAAS,EAAA,8BAAA;AAAA,IACT,KAAO,EAAA;AAAA,MACL,QAAU,EAAA,2BAAA;AAAA,MACV,QAAU,EAAA,eAAA;AAAA,KACZ;AAAA,IACA,GAAK,EAAA;AAAA,MACH,QAAU,EAAA,2BAAA;AAAA,MACV,QAAU,EAAA,eAAA;AAAA,KACZ;AAAA,IACA,cAAgB,EAAA;AAAA,MACd,WAAa,EAAA;AAAA,QACX;AAAA,UACE,cAAgB,EAAA,OAAA;AAAA,UAChB,GAAK,EAAA,iBAAA;AAAA,SACP;AAAA,OACF;AAAA,KACF;AAAA,GACF;AAAA,EACA;AAAA,IACE,EAAI,EAAA,GAAA;AAAA,IACJ,QAAU,EAAA,iCAAA;AAAA,IACV,OAAS,EAAA,8BAAA;AAAA,IACT,KAAO,EAAA;AAAA,MACL,QAAU,EAAA,2BAAA;AAAA,MACV,QAAU,EAAA,eAAA;AAAA,KACZ;AAAA,IACA,GAAK,EAAA;AAAA,MACH,QAAU,EAAA,2BAAA;AAAA,MACV,QAAU,EAAA,eAAA;AAAA,KACZ;AAAA,IACA,cAAgB,EAAA;AAAA,MACd,WAAa,EAAA;AAAA,QACX;AAAA,UACE,cAAgB,EAAA,OAAA;AAAA,UAChB,GAAK,EAAA,iBAAA;AAAA,SACP;AAAA,OACF;AAAA,KACF;AAAA,GACF;AACF,CAAA;;ACzFA,MAAM,cAAA,GAAiB,MAAO,CAAA,GAAG,CAAE,CAAA;AAAA,EACjC,OAAS,EAAA,GAAA;AAAA,EACT,MAAQ,EAAA,aAAA;AACV,CAAC,CAAA,CAAA;AAEM,MAAM,gBAAgB,CAAC;AAAA,EAC5B,eAAA;AAAA,EACA,MAAS,GAAA,UAAA;AACX,CAAa,KAAA;AACX,EACE,uBAAA,KAAA,CAAA,aAAA,CAAC,OAAI,QAAS,EAAA,UAAA,EAAW,QAAO,MAAO,EAAA,KAAA,EAAM,MAC3C,EAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,cAAe,EAAA,EAAA,CAAA,EAAG,KAChB,MAAO,CAAA,GAAA,CAAI,CACV,KAAA,qBAAA,KAAA,CAAA,aAAA,CAAC,aAAc,EAAA,EAAA,GAAA,EAAK,MAAM,EAAI,EAAA,KAAA,EAAc,CAC7C,CACH,CAEA,kBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,GAAA;AAAA,IAAA;AAAA,MACC,MAAO,EAAA,MAAA;AAAA,MACP,KAAM,EAAA,MAAA;AAAA,MACN,OAAQ,EAAA,MAAA;AAAA,MACR,cAAe,EAAA,QAAA;AAAA,MACf,UAAW,EAAA,QAAA;AAAA,MACX,QAAS,EAAA,UAAA;AAAA,MACT,IAAM,EAAA,CAAA;AAAA,MACN,GAAK,EAAA,CAAA;AAAA,KAAA;AAAA,oBAEL,KAAA,CAAA,aAAA;AAAA,MAAC,MAAA;AAAA,MAAA;AAAA,QACC,OAAQ,EAAA,WAAA;AAAA,QACR,KAAM,EAAA,SAAA;AAAA,QACN,OAAS,EAAA,eAAA;AAAA,QACT,IAAK,EAAA,OAAA;AAAA,OAAA;AAAA,MACN,SAAA;AAAA,KAED;AAAA,GAEJ,CAAA,CAAA;AAEJ,CAAA;;ACzBO,MAAM,eAAe,MAAM;AAxClC,EAAA,IAAA,EAAA,EAAA,EAAA,CAAA;AAyCE,EAAA,MAAM,CAAC,IAAM,EAAA,OAAO,IAAI,QAAS,CAAA,QAAA,CAAS,KAAK,CAAA,CAAA;AAC/C,EAAA,MAAM,YAAY,YAAa,EAAA,CAAA;AAE/B,EAAM,MAAA,SAAA,GAAY,CAAC,MAAA,GAAS,CAAM,KAAA;AAChC,IAAA,OAAA,CAAQ,UAAQ,IAAK,CAAA,IAAA,CAAK,EAAE,GAAK,EAAA,MAAA,EAAQ,CAAC,CAAA,CAAA;AAC1C,IAAU,SAAA,CAAA,YAAA,CAAa,SAAS,aAAa,CAAA,CAAA;AAAA,GAC/C,CAAA;AAEA,EAAA,MAAM,EAAE,UAAA,EAAY,aAAe,EAAA,MAAA,KAAW,SAAU,EAAA,CAAA;AAExD,EAAA,QAAA,CAAS,YAAY,MAAO,CAAA,IAAI,CAAG,EAAA,CAAC,MAAM,CAAC,CAAA,CAAA;AAE3C,EAAM,MAAA;AAAA,IACJ,SAAW,EAAA,iBAAA;AAAA,IACX,UAAY,EAAA,kBAAA;AAAA,IACZ,IAAA,EAAM,YAAY,EAAC;AAAA,MACjB,iBAAkB,CAAA;AAAA,IACpB,OAAS,EAAA,UAAA;AAAA,GACV,CAAA,CAAA;AACD,EAAM,MAAA,iBAAA,GAAA,CAAoB,eAAU,IAAK,CAAA,CAAA,CAAA,KAAK,EAAE,OAAY,KAAA,IAAI,MAAtC,IAAyC,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,EAAA,CAAA;AACnE,EAAA,MAAM,wBAA2B,GAAA,iBAAA,GAAoB,CAAC,iBAAiB,IAAI,EAAC,CAAA;AAC5E,EAAM,MAAA,CAAC,eAAiB,EAAA,kBAAkB,CAAI,GAAA,kBAAA;AAAA,IAC5C,wBAAA;AAAA,GACF,CAAA;AAEA,EAAA,MAAM,EAAE,MAAA,EAAQ,SAAW,EAAA,cAAA,KAAmB,cAAe,CAAA;AAAA,IAC3D,SAAA;AAAA,IACA,iBAAmB,EAAA,eAAA;AAAA,IACnB,OAAA,EAAS,UAAc,IAAA,SAAA,CAAU,MAAS,GAAA,CAAA;AAAA,IAC1C,OAAS,EAAA,IAAA,CAAK,OAAQ,CAAA,KAAK,EAAE,KAAM,EAAA;AAAA,IACnC,OAAS,EAAA,IAAA,CAAK,KAAM,CAAA,KAAK,EAAE,KAAM,EAAA;AAAA,IACjC,QAAA,EAAA,CAAU,EAAK,GAAA,IAAA,CAAA,QAAA,KAAL,IAAiB,GAAA,EAAA,GAAA,KAAA;AAAA;AAAA,GAC5B,CAAA,CAAA;AAED,EAAA,MAAM,UACH,GAAA,iBAAA,IAAqB,kBACtB,IAAA,cAAA,IACA,CAAC,aAAA,CAAA;AAEH,EACE,uBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,QAAA;AAAA,IAAA;AAAA,MACC,SAAS,EAAA,IAAA;AAAA,MACT,KACE,kBAAA,KAAA,CAAA,aAAA,CAAC,GAAI,EAAA,EAAA,OAAA,EAAQ,MAAO,EAAA,UAAA,EAAW,QAC7B,EAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,GAAI,EAAA,EAAA,MAAA,EAAQ,EAAI,EAAA,KAAA,EAAO,EAAI,EAAA,EAAA,EAAI,CAC9B,EAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,KAAI,EAAA,EAAA,GAAA,EAAK,gBAAkB,EAAA,GAAA,EAAI,iBAAkB,EAAA,CACpD,CACC,EAAA,UAAA,mBAEG,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,UAAW,EAAA,EAAA,OAAA,EAAS,MAAM,SAAA,CAAU,CAAE,CAAA,CAAA,EAAG,IAAK,EAAA,OAAA,EAAA,kBAC5C,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA,IAAS,CACZ,CAAA,kBACC,KAAA,CAAA,aAAA,CAAA,UAAA,EAAA,EAAW,OAAS,EAAA,MAAM,SAAU,CAAA,CAAC,CAAG,EAAA,IAAA,EAAK,OAC5C,EAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,QAAS,EAAA,IAAA,CACZ,CACA,kBAAA,KAAA,CAAA,aAAA,CAAC,GAAI,EAAA,EAAA,EAAA,EAAI,GAAK,EAAA,CAAA,kBACb,KAAA,CAAA,aAAA,CAAA,UAAA,EAAA,EAAW,OAAQ,EAAA,IAAA,EAAA,EACjB,KAAK,cAAe,CAAA;AAAA,QACnB,OAAS,EAAA,OAAA;AAAA,QACT,KAAO,EAAA,OAAA;AAAA,QACP,GAAK,EAAA,SAAA;AAAA,OACN,CACH,CAAA,sCAEC,GAAI,EAAA,EAAA,IAAA,EAAM,GAAG,CAEd,kBAAA,KAAA,CAAA,aAAA;AAAA,QAAC,cAAA;AAAA,QAAA;AAAA,UACC,SAAA;AAAA,UACA,iBAAmB,EAAA,eAAA;AAAA,UACnB,oBAAsB,EAAA,kBAAA;AAAA,UACtB,QAAA,EACG,kBAAsB,IAAA,iBAAA,IAAsB,CAAC,UAAA;AAAA,SAAA;AAAA,OAGpD,CAEA,mBAAA,KAAA,CAAA,aAAA,CAAC,cAAW,OAAQ,EAAA,IAAA,EAAA,EAAK,QAAM,CAEnC,CAAA;AAAA,MAEF,QAAU,EAAA;AAAA,QACR,IAAM,EAAA,8BAAA;AAAA,QACN,KAAO,EAAA,gBAAA;AAAA,OACT;AAAA,KAAA;AAAA,oBAEC,KAAA,CAAA,aAAA,CAAA,GAAA,EAAA,IAAA,EACE,UACC,oBAAA,KAAA,CAAA,aAAA,CAAC,GAAI,EAAA,EAAA,EAAA,EAAI,CACP,EAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,QAAS,EAAA,EAAA,OAAA,EAAQ,OAAQ,EAAA,CAC5B,GAED,CAAC,UAAA,IAAc,aACd,oBAAA,KAAA,CAAA,aAAA,CAAC,aAAc,EAAA,EAAA,eAAA,EAAiB,MAAM,MAAA,CAAO,KAAK,CAAA,EAAG,CAEtD,EAAA,CAAC,cAAkB,IAAA,CAAC,iBAAqB,IAAA,UAAA,wCACvC,GAAI,EAAA,EAAA,CAAA,EAAG,CAAG,EAAA,EAAA,EAAI,CAAG,EAAA,SAAA,EAAW,GAAK,EAAA,QAAA,EAAS,MACxC,EAAA,EAAA,MAAA,CAAO,MAAW,KAAA,CAAA,oBAChB,KAAA,CAAA,aAAA,CAAA,GAAA,EAAA,EAAI,EAAI,EAAA,CAAA,EAAG,IAAI,CACd,EAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,UAAW,EAAA,EAAA,KAAA,EAAM,QAAS,EAAA,OAAA,EAAQ,IAAK,EAAA,EAAA,WAExC,CACF,CAAA,EAED,MAAO,CAAA,MAAA,EAAQ,CAAC,YAAY,CAAC,CAAA,CAAE,IAAI,CAClC,KAAA,qBAAA,KAAA,CAAA,aAAA;AAAA,MAAC,aAAA;AAAA,MAAA;AAAA,QACC,KAAK,CAAG,EAAA,KAAA,CAAM,UAAU,CAAA,CAAA,EAAI,MAAM,EAAE,CAAA,CAAA;AAAA,QACpC,KAAA;AAAA,OAAA;AAAA,KAEH,CACH,CAEJ,CAAA;AAAA,GACF,CAAA;AAEJ,CAAA;;ACvIA,MAAM,WAAA,GAAc,IAAI,WAAY,EAAA,CAAA;AAE7B,MAAM,mBAAmB,MAAM;AACpC,EAAA,2CACG,mBAAoB,EAAA,EAAA,MAAA,EAAQ,WAC3B,EAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,kBAAa,CAChB,CAAA,CAAA;AAEJ;;;;"}